<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Stopwatch</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --primary: #3b82f6;
            --text: #1e293b;
            --bg: #f8fafc;
            --panel: #ffffff;
            --lap-bg: #f1f5f9;
        }

        .dark-mode {
            --primary: #60a5fa;
            --text: #e2e8f0;
            --bg: #0f172a;
            --panel: #1e293b;
            --lap-bg: #334155;
        }

        body {
            background-color: var(--bg);
            color: var(--text);
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .display {
            font-family: 'Courier New', monospace;
            font-weight: 900;
            font-size: 5rem;
            letter-spacing: 0.1em;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .dark-mode .display {
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .control-btn {
            transition: all 0.2s ease;
            transform: scale(1);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .control-btn:active {
            transform: scale(0.98);
        }

        .dark-mode .control-btn {
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        @media (max-width: 640px) {
            .display {
                font-size: 4rem !important;
            }
            
            .control-btn {
                padding: 0.75rem 1.5rem !important;
                font-size: 1rem !important;
            }
        }

        .pulse-animation {
            animation: pulse 1.5s infinite ease-in-out;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.9; }
            100% { opacity: 1; }
        }

        .vibrate-animation {
            animation: vibrate 0.3s linear;
        }

        @keyframes vibrate {
            0% { transform: translateX(0); }
            25% { transform: translateX(-2px); }
            50% { transform: translateX(2px); }
            75% { transform: translateX(-1px); }
            100% { transform: translateX(0); }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4 transition-colors duration-300">
    <div class="w-full max-w-3xl bg-[var(--panel)] rounded-xl shadow-xl p-6 transition-all duration-300" id="stopwatch-container">
        <div class="flex justify-between items-center mb-6">
           
            <button id="theme-toggle" class="p-2 rounded-full hover:bg-[var(--lap-bg)] transition-colors focus:outline-none focus:ring-2 focus:ring-[var(--primary)]">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" id="theme-icon">
                    <path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd" />
                </svg>
            </button>
        </div>

        <div class="flex flex-col items-center">
            <div class="text-center mb-10">
                <div class="display text-8xl md:text-9xl font-black mb-2" id="display">00:00:00</div>
                <div class="flex justify-center text-xs text-gray-500 dark:text-gray-400 tracking-wider">
                    <span class="w-16">SECONDS</span>
                    <span class="w-16">MINUTES</span>
                    <span class="w-16">HOURS</span>
                </div>
            </div>
            <div class="flex justify-center gap-4 mb-8" id="controls">
                <button id="start-btn" class="control-btn px-8 py-4 bg-green-500 text-white rounded-lg hover:bg-green-600 active:bg-green-700 text-xl font-bold">
                    Start
                </button>
                <button id="stop-btn" class="control-btn px-8 py-4 bg-red-500 text-white rounded-lg hover:bg-red-600 active:bg-red-700 text-xl font-bold" disabled>
                    Stop
                </button>
                <button id="reset-btn" class="control-btn px-8 py-4 bg-gray-500 text-white rounded-lg hover:bg-gray-600 active:bg-gray-700 text-xl font-bold">
                    Reset
                </button>
            </div>
        </div>
    </div>

    <script>
        // Main Stopwatch Class
        class PrecisionStopwatch {
            constructor() {
                this.audioCtx = null;
                this.isDark = false;
                this.isRunning = false;
                this.startTime = 0;
                this.elapsedTime = 0;
                this.timerInterval = null;
                
                this.initAudio();
                this.initDOM();
                this.initEventListeners();
                this.reset();
            }
            
            initAudio() {
                try {
                    this.audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                } catch (e) {
                    console.warn('Web Audio API not supported');
                }
            }
            
            initDOM() {
                this.display = document.getElementById('display');
                this.startBtn = document.getElementById('start-btn');
                this.stopBtn = document.getElementById('stop-btn');
                this.resetBtn = document.getElementById('reset-btn');
                this.themeToggle = document.getElementById('theme-toggle');
                this.themeIcon = document.getElementById('theme-icon');
            }
            
            initEventListeners() {
                this.startBtn.addEventListener('click', () => this.start());
                this.stopBtn.addEventListener('click', () => this.stop());
                this.resetBtn.addEventListener('click', () => this.reset());
                this.themeToggle.addEventListener('click', () => this.toggleTheme());
            }
            
            formatTime(timeInMillis) {
                const hours = Math.floor(timeInMillis / 3600000).toString().padStart(2, '0');
                const minutes = Math.floor((timeInMillis % 3600000) / 60000).toString().padStart(2, '0');
                const seconds = Math.floor((timeInMillis % 60000) / 1000).toString().padStart(2, '0');
                const milliseconds = Math.floor((timeInMillis % 1000) / 10).toString().padStart(2, '0');
                return `${seconds}:${minutes}:${hours}`;
            }
            
            updateDisplay() {
                const currentTime = Date.now() - this.startTime + this.elapsedTime;
                const formattedTime = this.formatTime(currentTime);
                
                this.display.textContent = formattedTime;
            }
            
            start() {
                if (!this.isRunning) {
                    this.startTime = Date.now();
                    this.timerInterval = setInterval(() => this.updateDisplay(), 10);
                    this.isRunning = true;
                    this.startBtn.disabled = true;
                    this.stopBtn.disabled = false;
                    
                    this.playSound(440, 0.05, 'sine');
                    document.body.classList.add('pulse-animation');
                    this.vibrate(50);
                }
            }
            
            stop() {
                if (this.isRunning) {
                    clearInterval(this.timerInterval);
                    this.elapsedTime += Date.now() - this.startTime;
                    this.isRunning = false;
                    this.startBtn.disabled = false;
                    this.stopBtn.disabled = true;
                    
                    this.playSound(220, 0.05, 'sine');
                    document.body.classList.remove('pulse-animation');
                    this.vibrate(100);
                }
            }
            
            reset() {
                clearInterval(this.timerInterval);
                this.startTime = 0;
                this.elapsedTime = 0;
                this.isRunning = false;
                this.display.textContent = '00:00:00';
                this.startBtn.disabled = false;
                this.stopBtn.disabled = true;
                
                document.body.classList.remove('pulse-animation');
                this.playSound(330, 0.1, 'square');
                this.vibrate([50, 50, 50]);
            }
            
            toggleTheme() {
                this.isDark = !this.isDark;
                
                if (this.isDark) {
                    document.body.classList.add('dark-mode');
                    this.themeIcon.innerHTML = '<path fill-rule="evenodd" d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z" clip-rule="evenodd" />';
                } else {
                    document.body.classList.remove('dark-mode');
                    this.themeIcon.innerHTML = '<path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd" />';
                }
                
                this.vibrate(10);
            }
            
            playSound(freq, vol, type) {
                if (!this.audioCtx) return;
                
                try {
                    if (this.audioCtx.state === 'suspended') {
                        this.audioCtx.resume();
                    }
                    
                    const oscillator = this.audioCtx.createOscillator();
                    const gainNode = this.audioCtx.createGain();
                    
                    oscillator.type = type;
                    oscillator.frequency.value = freq;
                    gainNode.gain.value = vol;
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(this.audioCtx.destination);
                    
                    oscillator.start();
                    gainNode.gain.exponentialRampToValueAtTime(0.001, this.audioCtx.currentTime + 0.2);
                    oscillator.stop(this.audioCtx.currentTime + 0.2);
                } catch (e) {
                    console.warn('Sound playback failed');
                }
            }
            
            vibrate(pattern) {
                if (navigator.vibrate) {
                    try {
                        navigator.vibrate(pattern);
                    } catch (e) {
                        console.warn('Vibration failed');
                    }
                }
            }
        }

        // Initialize the stopwatch when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new PrecisionStopwatch();
        });
    </script>
</body>
</html>
